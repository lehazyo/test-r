(this["webpackJsonptest-r"]=this["webpackJsonptest-r"]||[]).push([[0],{25:function(t){t.exports=JSON.parse('[{"id":834,"title":"Stylize reimport modal","firstName":"Mihail","lastName":"Gachikov","status":"TESTING","priority":"MUST","date":"2021-09-12"},{"id":1023,"title":"Fix popup hiding animation","firstName":"Petr","lastName":"Mamontov","status":"IN_PROGRESS","priority":"SHOULD","date":"2021-09-13"},{"id":1021,"title":"A task with a very long name that should break into several lines","firstName":"Petr","lastName":"Mamontov","status":"TESTING","priority":"MUST","date":"2021-09-10"},{"id":998,"title":"A task with aWordThatHasNoSpacesAndThereforeShouldBeForceBrokenIntoSeveralLines not to break markup","firstName":"Petr","lastName":"Mamontov","status":"TESTING","priority":"SHOULD","date":"2021-09-11"},{"id":123,"title":"Code new Computation section","firstName":"Mihail","lastName":"Gachikov","status":"PLAN","priority":"COULD","date":"2021-09-02"},{"id":124,"title":"Fix uncaught error in Computation section","firstName":"Mihail","lastName":"Gachikov","status":"PLAN","priority":"MUST","date":"2021-09-03"},{"id":126,"title":"Implement Rename popup in Portfolio section","firstName":"Petr","lastName":"Mamontov","status":"PLAN","priority":"SHOULD","date":"2021-09-04"},{"id":129,"title":"Add preloader animation","firstName":"Petr","lastName":"Mamontov","status":"PLAN","priority":"COULD","date":"2021-09-05"},{"id":132,"title":"Design Computation section","firstName":"Petr","lastName":"Mamontov","status":"DONE","priority":"MUST","date":"2021-08-05"},{"id":134,"title":"Create Pen icon","firstName":"Vasiliy","lastName":"Rebrov","status":"PLAN","priority":"MUST","date":"2021-08-20"},{"id":136,"title":"Create Cancel icon","firstName":"Vasiliy","lastName":"Rebrov","status":"PLAN","priority":"MUST","date":"2021-08-20"},{"id":137,"title":"Create Reload icon","firstName":"Vasiliy","lastName":"Rebrov","status":"PLAN","priority":"MUST","date":"2021-08-20"},{"id":138,"title":"Create Trash icon","firstName":"Vasiliy","lastName":"Rebrov","status":"PLAN","priority":"MUST","date":"2021-08-20"},{"id":139,"title":"Create Eye icon","firstName":"Vasiliy","lastName":"Rebrov","status":"IN_PROGRESS","priority":"MUST","date":"2021-08-20"},{"id":135,"title":"Discuss Icon management tool design","firstName":"Vasiliy","lastName":"Rebrov","status":"PLAN","priority":"COULD","date":"2021-08-19"},{"id":141,"title":"Create Text Bubble icon","firstName":"Vasiliy","lastName":"Rebrov","status":"DONE","priority":"MUST","date":"2021-08-19"}]')},33:function(t,e,a){},35:function(t,e,a){},36:function(t,e,a){},37:function(t,e,a){},38:function(t,e,a){},39:function(t,e,a){},40:function(t,e,a){},41:function(t,e,a){"use strict";a.r(e);var s,i,r=a(0),n=a.n(r),o=a(11),c=a.n(o),l=a(27),d=a(14),u=a(47),p=a(6),f=(a(33),"TASK_ITEM"),O=a(2),j=Object(p.a)((function(t){var e=t.id,a=t.title,s=t.priority,i=Object(r.useContext)(U),n=Object(u.a)((function(){return{type:f,collect:function(t){return{isDragging:t.isDragging()}},end:function(t,a){var s=a.getDropResult();null!==s&&i.setStatus(e,s.status)}}})),o=Object(d.a)(n,2),c=o[0].isDragging,l=o[1],p=Object(r.useRef)(null);Object(r.useEffect)((function(){null!==p.current&&p.current.addEventListener("click",(function(){return i.setSelectedId(i.isIdSelected(e)?null:e)}))}),[]);var j=["task-wrapper","priority-".concat(s)];c&&j.push("task-wrapper--dragged");var N=i.isIdSelected(e);return N&&j.push("task-wrapper--selected"),Object(O.jsx)("div",{ref:l,className:"task-wrapper-dragger",children:Object(O.jsxs)("div",{ref:p,"aria-label":N?"Details of TSK-".concat(e," are open"):"",className:j.join(" "),children:[Object(O.jsxs)("header",{className:"task-header",children:["TSK-",e]}),Object(O.jsx)("div",{className:"task-body",children:Object(O.jsx)("div",{className:"task-title",children:a})})]})})}));!function(t){t.PLAN="PLAN",t.IN_PROGRESS="IN_PROGRESS",t.TESTING="TESTING",t.DONE="DONE"}(s||(s={})),function(t){t.MUST="MUST",t.SHOULD="SHOULD",t.COULD="COULD"}(i||(i={}));var N,v=function(t){switch(t){case s.DONE:return"Done";case s.IN_PROGRESS:return"In Progress";case s.PLAN:return"Plan";case s.TESTING:return"Testing";default:throw new Error("Unknown TaskStatus used")}},S=(a(35),a(16)),m=a(48),y=Object(p.a)((function(t){var e=t.status,a=Object(m.a)((function(){return{accept:f,drop:function(){return{status:e}}}}),[]),s=Object(d.a)(a,2)[1],i=Object(r.useContext)(U),n=i.isTasksLoading()?Object(O.jsx)("div",{"aria-label":"Tasks are loading...",className:"column-preloader"}):i.getTasksByStatus(e).map((function(t){return Object(O.jsx)(j,Object(l.a)({},t),Object(S.a)())}));return Object(O.jsxs)("div",{className:"column-wrapper",ref:s,children:[Object(O.jsx)("header",{className:"column-header",children:v(e)}),Object(O.jsx)("div",{className:"column-tasks-wrapper",children:n})]})})),h=(a(36),function(){return Object(O.jsx)("div",{className:"columns-wrapper",children:[s.PLAN,s.IN_PROGRESS,s.TESTING,s.DONE].map((function(t){return Object(O.jsx)(y,{status:t},Object(S.a)())}))})}),k=(a(37),Object(p.a)((function(t){var e=t.selectedTask,a=Object(r.useContext)(U),s=Object(r.useRef)(null);return Object(r.useEffect)((function(){null!==s.current&&s.current.addEventListener("click",(function(){a.setSelectedId(null)}))}),[]),Object(O.jsxs)("header",{className:"details-panel-header priority-".concat(e.priority),children:[Object(O.jsxs)("span",{className:"details-panel-id",children:["TSK-",e.id]}),Object(O.jsx)("span",{className:"details-panel-title",children:e.title}),Object(O.jsx)("button",{className:"details-panel-closer","aria-label":"Close task details panel",ref:s,children:"\ud83d\uddd9"})]})}))),b=(a(38),Object(p.a)((function(){var t=Object(r.useContext)(U).getSelectedTask();return t?Object(O.jsxs)("div",{className:"details-panel-wrapper",children:[Object(O.jsx)(k,{selectedTask:t}),Object(O.jsxs)("div",{className:"details-panel-body",children:[Object(O.jsxs)("div",{className:"details-panel-assignee",children:["Assignee: ",t.lastName,", ",t.firstName]}),Object(O.jsxs)("div",{className:"details-panel-assignee",children:["Date created: ",t.date]}),Object(O.jsxs)("div",{className:"details-panel-status",children:["Status: ",v(t.status)]})]})]}):null}))),T=a(23),g=a(24),L=a(7),x=a(3),I=[i.MUST,i.SHOULD,i.COULD],P=(N=function(){function t(e){Object(T.a)(this,t),this.privates=Object(x.o)({allTasks:[],tasksLoading:!1,selectedId:null,tasksByStatus:new Map}),this.delayedLoad=!1,this.initialTasks=null,this.delayedLoad=e.delayedLoad,this.initialTasks=e.initialTasks,this.loadTasks()}return Object(g.a)(t,[{key:"parseLocalStorageTasks",value:function(){if(void 0===localStorage)return!1;var t=localStorage.getItem("tasks");return null!==t&&void 0!==t&&JSON.parse(t).map((function(t){return t}))}},{key:"loadTasks",value:function(){var t=this;this.delayedLoad&&(this.privates.tasksLoading=!0);var e=this.parseLocalStorageTasks();this.privates.allTasks=e||(null!==this.initialTasks?this.initialTasks:[]),this.delayedLoad&&setTimeout((function(){t.privates.tasksLoading=!1}),500+2e3*Math.random())}},{key:"setSelectedId",value:function(t){this.privates.selectedId=t}},{key:"getSelectedId",value:function(){return this.privates.selectedId}},{key:"isIdSelected",value:function(t){return t===this.getSelectedId()}},{key:"sortTasks",value:function(t){t.sort((function(t,e){var a="".concat(t.lastName," ").concat(t.firstName),s="".concat(e.lastName," ").concat(e.firstName);if(a>s)return 1;if(a<s)return-1;var i=I.indexOf(t.priority),r=I.indexOf(e.priority);return i>r?1:i<r?-1:0}))}},{key:"getTasksByStatus",value:function(t){if(void 0===this.privates.tasksByStatus.get(t)){var e=this.privates.allTasks.filter((function(e){return e.status===t}));this.sortTasks(e),this.privates.tasksByStatus.set(t,e)}var a=this.privates.tasksByStatus.get(t);return null!==a&&void 0!==a?a:[]}},{key:"isTasksLoading",value:function(){return this.privates.tasksLoading}},{key:"getSelectedTask",value:function(){var t,e=this;return null!==(t=this.privates.allTasks.find((function(t){return t.id===e.privates.selectedId})))&&void 0!==t?t:null}},{key:"setStatus",value:function(t,e){var a=this.privates.allTasks.find((function(e){return e.id===t}));if(!a)throw new Error("Task not found");var s=a.status;a.status=e;var i=this.getTasksByStatus(s),r=i.findIndex((function(e){return e.id===t}));i.splice(r,1),this.privates.tasksByStatus.set(s,i);var n=this.getTasksByStatus(e);n.push(a),this.sortTasks(n),this.privates.tasksByStatus.set(e,n),this.writeTasksToLocalStorage()}},{key:"writeTasksToLocalStorage",value:function(){if(void 0!==localStorage){var t=JSON.stringify(this.privates.allTasks);localStorage.setItem("tasks",t)}}}]),t}(),Object(L.a)(N.prototype,"loadTasks",[x.f],Object.getOwnPropertyDescriptor(N.prototype,"loadTasks"),N.prototype),Object(L.a)(N.prototype,"setSelectedId",[x.f],Object.getOwnPropertyDescriptor(N.prototype,"setSelectedId"),N.prototype),Object(L.a)(N.prototype,"getSelectedId",[x.g],Object.getOwnPropertyDescriptor(N.prototype,"getSelectedId"),N.prototype),Object(L.a)(N.prototype,"isIdSelected",[x.g],Object.getOwnPropertyDescriptor(N.prototype,"isIdSelected"),N.prototype),Object(L.a)(N.prototype,"getTasksByStatus",[x.f],Object.getOwnPropertyDescriptor(N.prototype,"getTasksByStatus"),N.prototype),Object(L.a)(N.prototype,"setStatus",[x.f],Object.getOwnPropertyDescriptor(N.prototype,"setStatus"),N.prototype),N),w=a(46),D=a(26),E=a(25),M=(a(39),a(40),new P({delayedLoad:!0,initialTasks:E})),U=Object(r.createContext)(M),R=function(){return Object(r.useEffect)((function(){window.addEventListener("keydown",(function(t){"Escape"===t.key&&M.setSelectedId(null)}))}),[]),Object(O.jsx)(w.a,{backend:D.a,children:Object(O.jsx)(U.Provider,{value:M,children:Object(O.jsxs)("section",{className:"task-board-wrapper",children:[Object(O.jsx)(h,{}),Object(O.jsx)(b,{})]})})})};c.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(R,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.d8403082.chunk.js.map